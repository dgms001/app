
var ffnArmors = [// 法弗納防具 itemId
1242134,//月夜見尊的天雷劍			
1362146,//月夜見尊的慘鬼杖			
1582037,//月夜見尊的龍甲手槍			
1472271,//月夜見尊的慘魔拳			
1332286,//月夜見尊的斬殺刀					
1252102,//天鈿女命的靈魂棒			
1552126,//天鈿女命的赤花蝶扇			
1382271,//天鈿女命的魔靈杖			
1262046,//天鈿女命的ESP限制器			
1212126,//天鈿女命的眩光杖			
1372234,//天鈿女命的卻鬼棒			
1282030,//天命魔力手套			
1272030,//月神鎖鏈			
1442282,//天照的天羽羽斬			
1312209,//天照的天月斧			
1422194,//天照的破靂剛杵			
1542124,//天照的村正			
1412186,//天照的鬼炎斧			
1402265,//天照的御魂劍			
1322261,//天照的金剛杵			
1232119,//天照的猛嵐劍			
1432224,//天照的風滅戟			
1302349,//天照的叢云劍			
1492241,//素盞嗚尊的雷激槍			
1482229,//素盞嗚尊的慘血熊千			
1532154,//素盞嗚尊的紅炎炮			
1242135,//素盞嗚尊的豪雷劍			
1222119,//素盞嗚尊的虹擊炮			
1462249,//大山祇神的大通蓮弓			
1452263,//大山祇神的火魂弓			
1522149,//大山祇神的雙龍閃弩
1004075, //海神王冠
1082489, //高級次元手套
1102887, //緣分之翼
1032219, //遺忘之神話耳環			
1190900, //永恒時間徽章						
1182136, //MX-131徽章			
1182158, //奧爾卡的徽章
1182006, //傳說勇士徽章			
1182011, //正義英雄徽章
1182087, //水晶幸運徽章	
1202261, //玉壺圖騰			
1202262, //青銅香爐圖騰			
1202260, //騎馬像圖騰			
1202161, //水精靈圖騰			
1202162, //吐精靈圖騰			
1202163, //風精靈圖騰			
1202164, //風精靈圖騰					
1202090, //真·本多忠勝圖騰			
1202089, //真·真田幸村圖騰			
1202091, //真·上杉謙信圖騰						
1202087, //黑蛇圖騰			
1202088, //白蛇圖騰				
1202119, //異界的希納斯圖騰			
1202189, //護理員的圖騰			
1202188, //護士的圖騰			
1202187, //醫院院長的圖騰
1592036,//極限古功
1022211, //漩渦眼鏡			
1102623, //漩渦披風			
1082556, //漩渦手套			
1052669, //漩渦皇家外套						
1072870, //漩渦鞋			
1152160, //漩渦護肩			
1272028, //漩渦鎖鏈			
1032224, //漩渦耳環			
1132247, //漩渦腰帶
1012438, //漩渦文身			
1122269, //漩渦吊墜			
1003976, //漩渦帽子	
1422158, //漩渦巨錘			
1482189, //漩渦沖拳			
1552072, //漩渦之風			
1302297, //漩渦劍			
1242090, //漩渦鎖鏈劍			
1462213, //漩渦弩			
1212089, //漩渦雙頭杖			
1362109, //漩渦手杖						
1232084, //漩渦惡魔劍			
1582025, //漩渦拳炮			
1322223, //漩渦錘					
1522113, //漩渦雙翼弩			
1452226, //漩渦弓			
1472235, //漩渦拳甲			
1332247, //漩渦匕首			
1222084, //漩渦靈魂手銃			
1382231, //漩渦長杖			
1532118, //漩渦手炮			
1252033, //漩渦虎梳魔法棒			
1402220, //漩渦雙手劍			
1312173, //漩渦斧			
1262029, //漩渦ESP限制器
1282028, //漩渦魔力手套			
1492199, //漩渦手銃			
1372195, //漩渦短杖			
1412152, //漩渦雙手戰斧			
1542072, //漩渦武士之劍			
1432187, //漩渦矛						
1442242, //漩渦戟	
1592032,//漩渦古弓	
1342090,//漩渦刀
1342109,//新戰國刀
1092088,//戰神飛俠盾
1092089,//戰神法師盾
1092087,//戰神戰士盾
1092111,//外星人飛俠盾
1092110,//外星人法師盾
1092109,//外星人戰士盾
1672073,//妖精心臟
1113070,//真紅戒指
1152155,//真紅護肩
1032216,//真紅耳環
1102482, //暴君赫爾梅斯披風		
1102485, //暴君阿爾泰披風			
1102481, //暴君西亞戴斯披風			
1102484, //暴君利卡昂披風
1102483,//暴君凱倫披風								
1082545, //暴君凱倫手套			
1082547, //暴君阿爾泰手套			
1082546, //暴君利卡昂手套			
1082543, //暴君西亞戴斯手套			
1082544, //暴君赫爾梅斯手套			
1072747, //暴君阿爾泰靴			
1072746, //暴君利卡昂靴			
1072743, //暴君西亞戴斯靴			
1072745, //暴君凱倫靴			
1072744, //暴君赫爾梅斯靴			
1132178, //暴君阿爾泰腰帶			
1132174, //暴君西亞戴斯腰帶			
1132175, //暴君赫爾梅斯腰帶			
1132176, //暴君凱倫腰帶			
1132177, //暴君利卡昂腰帶
1004424,//埃蘇萊布斯弓箭手帽			
1052882,//埃蘇萊布斯騎士套裝			
1004422,//埃蘇萊布斯騎士頭盔			
1052887,//埃蘇萊布斯魔法師套裝			
1004425,//埃蘇萊布斯飛俠帽			
1052888,//埃蘇萊布斯弓箭手套裝			
1004423,//埃蘇萊布斯法師帽			
1004426,//埃蘇萊布斯海盜帽			
1052890,//埃蘇萊布斯海盜套裝			
1052889,//埃蘇萊布斯飛俠套裝			
1073032,//埃蘇萊布斯法師鞋				
1073030,//埃蘇萊布斯騎士鞋			
1102795,//埃蘇萊布斯弓箭手披風		
1102794,//埃蘇萊布斯魔法師披風			
1102775,//埃蘇萊布斯騎士披風			
1073035,//埃蘇萊布斯海盜鞋			
1073034,//埃蘇萊布斯飛俠鞋			
1102797,//埃蘇萊布斯海盜披風			
1102796,//埃蘇萊布斯飛俠披風			
1073033,//埃蘇萊布斯弓箭手鞋			
1152177,//埃蘇萊布斯弓箭手護肩	
1152176,//埃蘇萊布斯法師護肩			
1152174,//埃蘇萊布斯騎士護肩			
1152178,//埃蘇萊布斯飛俠護肩			
1152179,//埃蘇萊布斯海盜護肩			
1592019, //真挨蘇武器			
1542108, //真挨蘇武器			
1252093, //真挨蘇武器			
1552110, //真挨蘇武器			
1582017, //真挨蘇武器			
1532144, //真挨蘇武器			
1522138, //真挨蘇武器			
1492231, //真挨蘇武器			
1482216, //真挨蘇武器			
1472261, //真挨蘇武器			
1372222, //真挨蘇武器			
1362135, //真挨蘇武器			
1342101, //真挨蘇武器			
1412177, //真挨蘇武器			
1402251, //真挨蘇武器			
1382259, //真挨蘇武器			
1332274, //真挨蘇武器			
1322250, //真挨蘇武器			
1312199, //真挨蘇武器			
1302333, //真挨蘇武器			
1282016, //真挨蘇武器			
1272016, //真挨蘇武器			
1262017, //真挨蘇武器			
1242120, //真挨蘇武器			
1242116, //真挨蘇武器			
1232109, //真挨蘇武器			
1222109, //真挨蘇武器			
1212115, //真挨蘇武器
1442223, //法弗納半月寬刃斧						
1492179, //法弗納左輪槍			
1242060, //法弗納精神之刃									
1422140, //法弗納閃電錘					
1242061, //法弗納精神之刃						
1412135, //法弗納戰鬥切肉斧						
1532098, //法弗納榮耀炮						
1332225, //法弗納大馬士革劍						
1432167, //法弗納貫雷槍			
1462193, //法弗納風翼弩								
1272015, //法弗納鎖鏈						
1282015, //法弗納魔力手套								
1482168, //法弗納巨狼之爪					
1382208, //法弗納魔冠之杖						
1322203, //法弗納戈耳迪錘			
1472214, //法弗納危險之手			
1262016, //法弗納ESP限制器									
1232057, //法弗納死亡使者			
1342082, //法弗納急速之刃					
1372177, //法弗納魔力奪取者			
1312153, //法弗納雙刃切肉斧					
1522094, //法弗納雙風翼弩						
1222058, //法弗納天使手銃						
1542063, //法弗納皇刀正宗				
1362090, //法弗納洞察手杖					
1302275, //法弗納銀槲之劍			
1582016, //法弗納巨山						
1212063, //法弗納魔力源泉杖				
1252015, //法弗納北極星魔法棒					
1452205, //法弗納追風者			
1402196, //法弗納懺悔之劍			
1552063, //法弗納煌扇藍姬
1592018,//法弗納遠古弓
1382235,//阿麗莎
1402224,//柳德
1402180//解放的凱瑟利安

];

var materials_ffnArmor = [// 強化法弗納防具所需要的材料
	[2430673, 50], // 所需材料的 itemId， 數量
	[4000000, 1000], // 所需材料的 itemId， 數量
	[4000016, 1000], // 所需材料的 itemId， 數量
	[4000124, 300],// 所需材料的 itemId， 數量
	[4002000, 20]// 所需材料的 itemId， 數量
];

var mesoPay = 200; // 所需消耗的金幣
var mesoPay1 = 200000000; // 所需消耗的金幣

var flagChosenItem = true;
var flagUsedItem = true;
	
var chosenItem = player.getInventorySlot(1,2);
var chosenItemId;
if (chosenItem == null) {
	flagChosenItem = false;
} else {
	chosenItemId = chosenItem.getDataId();
}
	
var usedItem = player.getInventorySlot(1,1);
var usedItemId;
if (usedItem == null) {
	flagUsedItem = false;
} else {
	usedItemId = usedItem.getDataId();
}
//裝備欄是否為空
if (!flagChosenItem || !flagUsedItem) {
	str += "#r需要強化的和作為材料的裝備請放置好裝備欄第一、第二格再嘗試！#k\r\n";
	npc.say(str);
	npc.dispose();
}
//判斷裝備第二個裝備是否在數組內
var isMatch = false;
for(var i = 0;i < ffnArmors.length;i++)
{
	if(chosenItemId == ffnArmors[i]) {
		isMatch = true;//在數組內
		break;
	} else
		continue;//不在
}
//裝備是否在數組內
if(!isMatch) {
	npc.say("可強化范圍內的 裝備如下列：\r\n\r\n#v1342109##v1592036##v1522149##v1452263##v1462249##v1222119##v1242135##v1532154##v1482229##v1492241##v1302349##v1432224##v1232119##v1322261##v1402265##v1542124##v1422194##v1442282##v1272030##v1312209##v1312209##v1282030##v1372234##v1212126##v1252102##v1262046##v1382271##v1552126##v1242134##v1332286##v1362146#\r\n\r\n#v1004075##v1082489##v1102887##v1032219##v1182136##v1190900##v1182158##v1182006##v1182011##v1182087##v1202261##v1202262##v1202260##v1202161##v1202162##v1202163##v1202164##v1202090##v1202091##v1202089##v1202088##v1202087##v1202188##v1202189##v1202119#\r\n\r\n#v1022211##v1102623##v1082556##v1052669##v1072870##v1102623##v1152160##v1032224##v1132247##v1012438##v1122269##v1003976##v1422158##v1482189##v1552072##v1302297##v1242090##v1462213##v1212089##v1362109##v1232084##v1582025##v1522113##v1452226##v1472235##v1332247##v1222084##v1382231##v1532118##v1252033##v1402220##v1312173##v1262029##v1282028##v1492199##v1412152##v1542072##v1542072##v1432187##v1322223##v1592032##v1342090#\r\n\r\n#v1672073##v1113070##v1152155##v1032216##v1402180##v1382235##v1402224##v1092111##v1092110##v1092109##v1092088##v1092089##v1092087#\r\n\r\n#v1102482##v1102485##v1102484##v1102483##v1102481##v1082543##v1082544##v1082545##v1082546##v1082547##v1072743##v1072744##v1072745##v1072746##v1072747##v1132174##v1132175##v1132176##v1132177##v1132178#\r\n\r\n#v1004424##v1004422##v1004425##v1004423##v1004426##v1052887##v1052888##v1052882##v1052890##v1052889##v1073032##v1073030##v1073033##v1073034##v1102775##v1073035##v1102795##v1102794##v1102797##v1102796##v1152177##v1152176##v1152174##v1152178##v1152179##v1592019##v1542108##v1252093##v1552110##v1582017##v1532144##v1522138##v1492231##v1482216##v1472261##v1372222##v1362135##v1342101##v1412177##v1402251##v1382259##v1332274##v1322250##v1312199##v1302333##v1282016##v1272016##v1262017##v1242120##v1242116##v1232109##v1222109##v1212115#\r\n\r\n#v1442223##v1492179##v1242060##v1422140##v1242061##v1412135##v1532098##v1332225##v1432167##v1462193##v1272015##v1282015##v1482168##v1382208##v1322203##v1472214##v1262016##v1232057##v1342082##v1372177##v1312153##v1522094##v1222058##v1542063##v1362090##v1302275##v1582016##v1212063##v1252015##v1452205##v1402196##v1552063##v1592018#\r\n\r\n");
	npc.dispose();
}		
//判斷是否是相同的裝備
if(chosenItemId != usedItemId) {
	npc.say("需要強化的裝備裝備#n與#e作為材料的裝備#n不是同系列或不是同類裝備！請確認後再次嘗試！");
	npc.dispose();
}
//這裡判斷物品的品級，1-12級別
var levelskill = chosenItem.getIncSkill();
if(levelskill >= 12) {
	npc.say("您的裝備已經強化到了12級，不能繼續強化了哦！");
	npc.dispose();
}


var str = "";
str += "#b#e<" + player.getName() + ">#n#k你好！這裡是#r#e裝備強化系統#n！\r\n";
str += "#b裝備強化只能夠強化#r深淵防具、航海、神秘、創世裝備#b，且每次強化必須消耗一個同類型的裝備方可進行強化。（如一個神秘武器，必須消耗另一個神秘武器；同理一個神秘防具，必須消耗另一個神秘防具）#k\r\n";
str += "#b請將你想要強化的裝備放置裝備欄的#r#e第二格（注意）#n#k，需要消耗掉的裝備放在#r#e第一格（注意）#n#k，否則強化會出錯。#r另外一件裝備的Boss傷或者無視不能超過255%。否則會被歸零！#k\r\n";
str += "當前裝備欄第二格的物品（需要強化）是\r\n";

//這裡判斷成功的概率，
var chance = sucessrate();

if (flagChosenItem) {
	str += "#b#e#v" + chosenItemId + "##t" + chosenItemId + "#  #r目前強化等級:"+ chosenItem.getIncSkill() + "  成功率:"+chance+"%#n#k\r\n\r\n";
} else {
	str += "#b為空！！！#k\r\n\r\n";
}
str += "當前裝備欄第一格的物品（作為材料）是\r\n";
if (flagUsedItem) {
	str += "#b#e#v" + usedItemId + "##t" + usedItemId + "#    #r目前強化等級："+ usedItem.getIncSkill() +"#n#k\r\n\r\n";
} else {
	str += "#b為空！！！#k\r\n\r\n";
}
str += "#r強化此裝備需要的材料如下：#k\r\n\r\n";

str += "#b#v" + usedItemId + ":##v" + usedItemId + ":# x 1#k\r\n";
for (var i = 0; i < materials_ffnArmor.length; i++) {
	str += "#b#v" + materials_ffnArmor[i][0] + ":##v" + materials_ffnArmor[i][0] + ":# x " + materials_ffnArmor[i][1] + "#k\r\n";
}
str += "\r\n#b#e如果需要強化請點擊下一步。#n#k\r\n";
//java.lang.System.out.println(str+"-----------------");
npc.sayNext(str);//-------------------------------------------------直接status + 1;

var str = "";
str += "#b#e<" + player.getName() + ">#n#k，目前你持有的材料如下：#k\r\n";
str += "#r#e（請千萬注意！需要強化的裝備放在第二格！第二格！第二格！否則消耗錯誤GM不負責賠償！另外需要注意，一件裝備的Boss傷或者無視不能超過255%。否則會被清零！）#n#k\r\n\r\n";
var isEnough = 0;
str += "#b#v" + usedItemId + ":##v" + usedItemId + ":# x 1#k\r\n";
for (var i = 0; i < materials_ffnArmor.length; i++) {
	str += "#b#v" + materials_ffnArmor[i][0] + ":##v" + materials_ffnArmor[i][0] + ":# x " + player.getAmountOfItem(materials_ffnArmor[i][0]) + "/"+materials_ffnArmor[i][1]+"#k\r\n";
	if (player.hasItem(materials_ffnArmor[i][0], materials_ffnArmor[i][1])) {
		isEnough++;
	}
}
//if (isEnough != materials_ffnArmor.length) {
if (isEnough != materials_ffnArmor.length) {
	str += "綁定余額： "+getCoin(1)+" / 100.0\r\n#r#e你的材料不足，請收集足夠的材料再來嘗試！#n#k";
	npc.say(str);	
	//npc.dispose();
} else if (parseInt(getCoin(1)) < mesoPay) {
				str += "綁定余額： "+getCoin(1)+" / 100.0\r\n#r#e你的綁定余額不足，請收集足夠的材料再來嘗試！#n#k";
				npc.say(str);
} else if (!player.hasMesos(mesoPay1)) {
				str += "\r\n#r#e你的金幣不足2億，請確認背包有2億金幣再來嘗試！#n#k";
				npc.say(str);
} else {//開始強化

	
	//可以用某個道具來提升強化次數10%
	//（2），可以用某個道具來保護不會爆炸，但是會降級。
	//（3），可以用某個道具來讓強化提升到100%
	str += "#L0#" + "#e#r不使用道具增加強化概率" + "\r\n";
	str += "#L1#" + "#e#r使用道具#v"+4310195+"#增加10%強化概率" + "\r\n";
	str += "#L2#" + "#e#r使用道具#v"+4310196+"#防止裝備失敗後爆炸" + "\r\n";
	str += "#L3#" + "#e#r使用道具#v"+4310266+"#增加至100%強化概率" + "\r\n";
	var selection = npc.askMenu(str);
	var bomb = Math.floor(Math.random() * 100);
	var bb = true;
	var jj = false;
	switch(selection)
	{
		case 0:
			qianghua();
			break;
		case 1://+10%
			if(player.getAmountOfItem(4310195)>=1){
				chance = chance + 10;
				player.loseItem(4310195, 1);
				qianghua();
			} else {
				npc.say("#b#e請確認背包是否存在：#v4310195# #v4310195##k");
			}
			break;
		case 2://防爆
			if(player.getAmountOfItem(4310196)>=1){
			bb = false; 
			jj = true;
			player.loseItem(4310196, 1);
			qianghua();
			} else {
				npc.say("#b#e請確認背包是否存在：#v4310196# #v4310196##k");
			}
			break;
		case 3://100%
			if(player.getAmountOfItem(4310266)>=1){
			chance = 999;
			player.loseItem(4310266, 1);
			qianghua();
			} else {
				npc.say("#b#e請確認背包是否存在：#v4310266# #v4310266##k");
			}
			break;
	}
	

	//str += "\r\n#b#e你的材料已經足夠強化，立刻強化？#n#k";
	//npc.sayNext(str);	
}

function qianghua()
{
	for (var i = 0; i < materials_ffnArmor.length; i++) {
			player.loseItem(materials_ffnArmor[i][0], materials_ffnArmor[i][1]);
		}
	player.loseItem(usedItemId, 1);
	if (bomb > chance) {//合成失敗
		chosenItem.setStr((chosenItem.getStr() == 0) ? 0 : (chosenItem.getStr() - randomNum()));
			chosenItem.setInt((chosenItem.getInt() == 0) ? 0 : (chosenItem.getInt() - randomNum()));
			chosenItem.setDex((chosenItem.getDex() == 0) ? 0 : (chosenItem.getDex() - randomNum()));
			chosenItem.setLuk((chosenItem.getLuk() == 0) ? 0 : (chosenItem.getLuk() - randomNum()));
		chosenItem.setMaxHp((chosenItem.getMaxHp() == 0) ? 0 : (chosenItem.getMaxHp() - randomNum()));
		chosenItem.setMaxMp((chosenItem.getMaxMp() == 0) ? 0 : (chosenItem.getMaxMp() - randomNum()));
			chosenItem.setPad((chosenItem.getPad() == 0) ? 0 : (chosenItem.getPad() - randomNum()));
			chosenItem.setMad((chosenItem.getMad() == 0) ? 0 : (chosenItem.getMad() - randomNum()));
			chosenItem.setPdd((chosenItem.getPdd() == 0) ? 0 : (chosenItem.getPdd() - randomNum()));
		chosenItem.setStatR((chosenItem.getStatR() == 0) ? 0 : (chosenItem.getStatR() - randomNum()));
		  chosenItem.setDamR((chosenItem.getDamR() == 0) ? 0 : (chosenItem.getDamR() - randomNum()));
		chosenItem.setBossDamageR((chosenItem.getBossDamageR() == 0) ? 0 : (chosenItem.getBossDamageR() - randomNum()));
			chosenItem.setIgnorePDR((chosenItem.getIgnorePDR() == 0) ? 0 :(chosenItem.getIgnorePDR() - randomNum()));
		chosenItem.setIncSkill(chosenItem.getIncSkill() - 1);
		player.updateItem(2,chosenItem);
		if(bb) {
			player.loseItem(chosenItemId, 1);
			npc.say("#b#e強化失敗！裝備和材料消失了~~~~#k");
		} else {
			npc.say("#b#e強化失敗！裝備完好無損哦！#k");
		}	
	} else {//成功
		    chosenItem.setStr((chosenItem.getStr() == 0) ? 0 : (chosenItem.getStr() + randomNum()));
			chosenItem.setInt((chosenItem.getInt() == 0) ? 0 : (chosenItem.getInt() + randomNum()));
			chosenItem.setDex((chosenItem.getDex() == 0) ? 0 : (chosenItem.getDex() + randomNum()));
			chosenItem.setLuk((chosenItem.getLuk() == 0) ? 0 : (chosenItem.getLuk() + randomNum()));
		chosenItem.setMaxHp((chosenItem.getMaxHp() == 0) ? 0 : (chosenItem.getMaxHp() + randomNum()));
		chosenItem.setMaxMp((chosenItem.getMaxMp() == 0) ? 0 : (chosenItem.getMaxMp() + randomNum()));
			chosenItem.setPad((chosenItem.getPad() == 0) ? 0 : (chosenItem.getPad() + randomNum()));
			chosenItem.setMad((chosenItem.getMad() == 0) ? 0 : (chosenItem.getMad() + randomNum()));
			chosenItem.setPdd((chosenItem.getPdd() == 0) ? 0 : (chosenItem.getPdd() + randomNum()));
		chosenItem.setStatR((chosenItem.getStatR() == 0) ? 0 : (chosenItem.getStatR() + randomNum()));
		  chosenItem.setDamR((chosenItem.getDamR() == 0) ? 0 : (chosenItem.getDamR() + randomNum()));
		chosenItem.setBossDamageR((chosenItem.getBossDamageR() == 0) ? 0 : (chosenItem.getBossDamageR() + randomNum()));
			chosenItem.setIgnorePDR((chosenItem.getIgnorePDR() == 0) ? 0 :(chosenItem.getIgnorePDR() + randomNum()));
		chosenItem.setIncSkill(chosenItem.getIncSkill() + 1);
		player.gainMesos(-mesoPay1);
		gainRMB(-mesoPay,"平民強化扣除", 1);
		player.updateItem(2,chosenItem);
		npc.say("#b#e強化成功！感受一下裝備的變化吧！#k");
		npc.broadcastPlayerNotice(0x15,"[裝備強化] 玩家 <" + player.getName() + "> 通過 【普通裝備強化】 功能將裝備進行了極大的增幅！大家趕緊也去試試吧！");
	}
}


function randomNum() {
	var num = Math.floor(Math.random() * 8 + 1);
	return num;
}

function sucessrate() {
	var chance1 = 0;
	switch(levelskill)
	{
		case 0:
			chance1 = 80;
			break;
		case 1:
			chance1 = 70;
			break;
		case 2:
			chance1 = 60;
			break;
		case 3:
			chance1 = 50;
			break;
		case 4:
			chance1 = 40;
			break;
		case 5:
			chance1 = 30;
			break;
		case 6:
			chance1 = 10;
			break;
		case 7:
			chance1 = 9;
			break;
		case 8:
			chance1 = 7;
			break;
		case 9:
			chance1 = 5;
			break;
		case 10:
			chance1 = 3;
			break;
		case 11:
			chance1 = 1;
			break;
	}
	return chance1;
}


function gainRMB(num,describe,type){
	var myAccountName =getAccountName();
	var sql = "insert into zz_coin(account, coin, paytime,remark,type) values('"+myAccountName+"',"+num+",now(),'"+describe+"',"+type+")";
	player.customSqlInsert(sql);
}

function getCoin(type){
	var sql = " select (case WHEN SUM(coin) is NULL THEN 0 ELSE SUM(coin) end )  coin  from zz_coin where `type` = "+type+" and account =  '"+getAccountName()+"' ";
	var resultList = player.customSqlResult(sql);
	var coin=1;
	if(null!=resultList){
		for (var i = 0; i < resultList.size(); i++) {
	    var result = resultList.get(i);
	    if (result == null) {
	        break;
	    }
			coin = result.get("coin");
			break;
		}	
	}
	if(coin==null){
		coin =1;
	}	
	return coin;
}

function  getAccountName() {
	var sql = "select name from accounts where id = (select accounts_id from characters where id = "+player.getId()+");";
	var resultList = player.customSqlResult(sql);
	var accountName=0;
	for (var i = 0; i < resultList.size(); i++) {
    var result = resultList.get(i);
    if (accountName == null) {
        break;
    }
		var accountName = result.get("name");
	}
	return accountName;
}