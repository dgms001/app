var status = -1;
var a1 = "#fItem/Cash/0501.img/05010057/effect/default/3#"; //撒花
var a2 = "#fItem/Cash/0501.img/05010143/effect/default/0#"; //皇冠左
var a3 = "#fItem/Cash/0501.img/05010143/effect/default/4#"; //皇冠右
var a4 = "#fItem/Cash/0501.img/05010150/effect/default/2#"; //嘲笑候
var a5 = "#fItem/Cash/0501.img/05010180/effect/default/0#"; //彩虹书
var a6 = "#fItem/Cash/0501.img/05010129/effect/default/0#"; //初音3
var a7 = "#fEffect/ItemEff.img/1005163/effect/default/0#" //中音符
var a8 = "#fEffect/ItemEff.img/1070069/effect/walk1/0#" //彩虹小云0-7
var a88 = "#fEffect/ItemEff.img/1070069/effect/walk1/4#" //彩虹小云0-7
var a888 = "#fEffect/ItemEff.img/1070069/effect/walk1/6#" //彩虹小云0-7
var a9 = "#fEffect/ItemEff.img/1073056/effect/walk1/0#" //好看的花0-7
var a10 = "#fEffect/ItemEff.img/1102420/effect/default/0#" //彩虹中星星0-5
var a11 = "#fEffect/ItemEff.img/1102919/effect/default/0#" //小黄鸭车0-7
var a12 = "#fEffect/ItemEff.img/1102930/effect/default/0#" //雨点彩虹0-15
var a112 = "#fEffect/ItemEff.img/1102930/effect/default/4#" //雨点彩虹0-15
var a122 = "#fEffect/ItemEff.img/1102930/effect/default/12#" //雨点彩虹0-15
var a1222 = "#fEffect/ItemEff.img/1102930/effect/default/13#" //雨点彩虹0-15
var a13 = "#fEffect/ItemEff.img/1102987/effect/default/0#" //卡片绿水蘑菇
var a14 = "#fEffect/ItemEff.img/1103035/effect/default/0#" //彩虹音符长
var a15 = "#fEffect/ItemEff.img/1103094/effect/default/0#" //长花
var a16 = "#fEffect/ItemEff.img/1103440/effect/default/0#" //石头怪
var a17 = "#fEffect/ItemEff.img/1112013/1/5#" //爱心5-9
var a18 = "#fEffect/ItemEff.img/1082692/effect/default/6#" //彩虹熊14-21
var a19 = "#fEffect/ItemEff.img/1053230/effect/default/2#" //爱心兔长
var a20 = "#fEffect/ItemEff.img/1005102/effect/default/3#" //粉色PB长3-5
var a21 = "#fEffect/ItemEff.img/1005103/effect/default/3#" //绿水灵长3-5
var a22 = "#fEffect/ItemEff.img/1103083/effect/default/0#" //中蝴蝶长3-5
var a23 = "#fEffect/ItemEff.img/1005254/effect/default/4#" //蓝色中小星星
var a25 = "#fEffect/ItemEff.img/1005353/effect/default/0#" //绿芽叶中小
var a26 = "#fEffect/ItemEff.img/1073379/effect/default/0#" //幽灵云长
var a27 = "#fEffect/ItemEff.img/1073435/effect/default/3#" //彩虹细云0-3
var a28 = "#fEffect/ItemEff.img/1005692/effect/default/7#" //彩虹星星爱心1005692-1005697
var a29 = "#fEffect/ItemEff.img/1073498/effect/default/7#" //彩虹爱心蝴蝶1073498-1073503
var a30 = "#fEffect/CharacterEff/1022223/6/0#" //跑马灯
var a31 = "#fEffect/CharacterEff/1022223/7/0#" //跑马灯
var a32 = "#fEffect/CharacterEff/1022223/8/0#" //跑马灯
var a33 = "#fEffect/ItemEff.img/1005163/effect/default/0#" //中音符
var a34 = "#fItem/Cash/0501.img/05010056/effect/walk1/5#"; //小草
var a35 = "#fItem/Cash/0501.img/05010056/effect/walk1/6#"; //草
var a36 = "#fItem/Cash/0501.img/05010056/effect/walk1/7#"; //草
var a37 = "#fItem/Pet/5000212.img/stand0/0#";//紅色惡魔
var a38 = "#fItem/Pet/5000213.img/stand0/0#";//藍色惡魔
var a39 = "#fItem/Pet/5000214.img/stand0/0#";//黃色惡魔

var c1 = "#fEffect/ItemEff.img/1005765/effect/default/0#" //小图标
var c2 = "#fEffect/ItemEff.img/1112001/0/0#" //小图标
var c3 = "#fEffect/ItemEff.img/1112002/0/0#" //小图标
var c4 = "#fEffect/ItemEff.img/1032328/effect/default/0#" //小图标
var c5 = "#fEffect/ItemEff.img/1032328/effect/backDefault/0#" //小图标
var c6 = "#fEffect/ItemEff.img/1032329/effect/default/0#" //小图标
var c7 = "#fEffect/ItemEff.img/1032329/effect/backDefault/0#" //小图标
var c8 = "#fEffect/ItemEff.img/1112006/0/1#" //小图标
var c9 = "#fEffect/ItemEff.img/1112806/0/0#" //小图标
var c10 = "#fEffect/ItemEff.img/1112807/0/0#" //小图标
var c11 = "#fEffect/ItemEff.img/1112809/0/0#" //小图标
var c12 = "#fEffect/ItemEff.img/1005799/effect/backDefault/0#" //小图标
var c13 = "#fEffect/ItemEff.img/1112024/0/5#" //小图标

var s1 = "#fUI/CashShop/CSBeauty/hairColor/Disable/0#"
var s1 = "#fUI/CashShop/CSBeauty/hairColor/Disable/1#"
var s2 = "#fUI/CashShop/CSBeauty/hairColor/Disable/2#"
var s3 = "#fUI/CashShop/CSBeauty/hairColor/Disable/3#"
var s4 = "#fUI/CashShop/CSBeauty/hairColor/Disable/4#"
var s5 = "#fUI/CashShop/CSBeauty/hairColor/Disable/5#"
var s6 = "#fUI/CashShop/CSBeauty/hairColor/Disable/6#"
var s7 = "#fUI/CashShop/CSBeauty/hairColor/Disable/7#"

var f1 = "#fUI/CashShop/CSBeauty/hairColor/Enable/0#"
var f1 = "#fUI/CashShop/CSBeauty/hairColor/Enable/1#"
var f2 = "#fUI/CashShop/CSBeauty/hairColor/Enable/2#"
var f3 = "#fUI/CashShop/CSBeauty/hairColor/Enable/3#"
var f4 = "#fUI/CashShop/CSBeauty/hairColor/Enable/4#"
var f5 = "#fUI/CashShop/CSBeauty/hairColor/Enable/5#"
var f6 = "#fUI/CashShop/CSBeauty/hairColor/Enable/6#"
var f7 = "#fUI/CashShop/CSBeauty/hairColor/Enable/7#"

var qq1 = "#fUI/EventShop/adventureShop/GradeBuyer/0#"
var qq2 = "#fUI/EventShop/adventureShop/GradeBuyer/1#"
var qq3 = "#fUI/EventShop/adventureShop/GradeBuyer/2#"
var qq4 = "#fUI/EventShop/adventureShop/GradeBuyer/3#"
var qq5 = "#fUI/EventShop/adventureShop/GradeBuyer/4#"
var qq6 = "#fEffect/CharacterEff/1051294/1/0#"

let tu3 = "#fUI/NameTag/medal/758/w#"
let tu4 = "#fEffect/SetEff.img/245/effect/28#"
let tu5 = "#fUI/NameTag/medal/758/e#"
let tu6 = "#fUI/NameTag/medal/758/c#"
date = new Date();
let week = date.getDay();
let day = date.getDate();
let hour = date.getHours();
let minute = date.getMinutes();

if (player.getChannel() == 1) {//只在一線開放
    AutoShop();//每日自動七龍珠

    //AutoGain();//每日自動福利
    //AutoRate();//假日自動雙倍
}
if ((hour == 00) && (minute < 3)) {
    delvalueA();
}
if(player.getEventValue("爆擊機率") >= 1  && player.getSkillLevel(80000566) <=1){
	player.setSkillLevel(80000566, 4, 4, false);
}
if(player.getEventValue("暴擊傷害") >= 1  && player.getSkillLevel(80000567) <=1){
	player.setSkillLevel(80000567, 4, 4, false);
}
if(player.getEventValue("攻擊力") >= 1  && player.getSkillLevel(80000565) <=1){
	player.setSkillLevel(80000565, 2, 2, false);
}
if(player.getEventValue("無視傷害") >= 1  && player.getSkillLevel(80000568) <=1){
	player.setSkillLevel(80000568, 4, 4, false);
}
if(player.getEventValue("BUFF持續") >= 1  && player.getSkillLevel(80000570) <=1){
	player.setSkillLevel(80000570, 4, 4, false);
	npc.say("獲得挑戰持續技能");
}
if (player.getEventValue("軍需官技能") >= 1 && player.getSkillLevel(80000616) == 0) {
        player.setSkillLevel(80000616, 1, 1, false);
		npc.say("獲得總司令技能");
}
    if (player.getEventValue("NEO力量轉移") >= 1 && player.getSkillLevel(80000661) == 0) {
        player.setSkillLevel(80000661, 1, 1, false);
       npc.say("獲得NEO力量技能");
    }
/*
if ((hour == 0) && (minute == 0)) {
    setItem(1, 0);
}
if ((hour == 0 || hour == 8 || hour == 10 || hour == 13 || hour == 16 || hour == 20 || hour == 22) && (minute == 1)) {
    npc.broadcastWeatherEffectNotice(203, "[世界BOSS]開啟啦在副本中心進入世界BOSS 固定時間整點0-3分都可以進入 超時視為放棄進入", 5000);
}*/
wcrw();
Sell();

sss = "\t\t" + a18 + "#v3994016##v3994000##v3994006##v3994006##v3994010#  #v3994025##v3994000##v3994012##v3994001#" + a18 + "\r\n"
sss += "\t  #fs16##L5##b#e" + c12 + "萬能傳送#l#L1#" + c12 + "#b贊助中心#l#L0#" + c12 + "限購商場#l#L3#" + c12 + "累計禮包#l\r\n"
sss += "\t #L14##b#e" + c12 + "戰地獎勵#l#L15#" + c12 + "#b每日簽到#l#L16#" + c12 + "在線獎勵#l#L17#" + c12 + "等級獎勵#l\r\n\r\n"
sss += "\t" + a15 + " " + a15 + " " + a15 + " " + a15 + " " + a15 + "\r\n#fs14#";
sss += "\t#k#L4##r" + c10 + "轉職中心#l#L2#" + c10 + "遊戲賬戶#l#L6#" + c10 + "遊戲商店#l#L7#" + c10 + "通貨中心#l#L8#" + c10 + "CDK 兌換#l\r\n";
sss += "\t#k#L9##r" + c10 + "BOSS挑戰#l#L10#" + c10 + "副本大廳#l#L11#" + c10 + "強者之路#l#L12#" + c10 + "特色玩法#l#L13#" + c10 + "更多雜項#l\r\n\r\n";
if (player.isGm()) {
    sss += "#fs21##e#r目前在線:" + online() + "#fs16#\r\n\r\n\r\n\r\n";
    sss += "\t\t#e#fs28##L30#個人發送獎勵#l#fs16#\r\n";
    sss += "    #r#L31#在線全部發送#l #L32#發送指定物品#l\r\n";
    sss += "    #b#L33#創怪測試#l\t #L34#強制結束副本#l\r\n";
    sss += "    #b#L35#開啟飛翔#l\r\n";
}
let selection = npc.askMenuA(sss);
switch (selection) {
    case 0:
        player.runScript("限購");
        break;
    case 1:
        player.runScript("贊助中心");
        break;
    case 2:
        player.runScript("個人信息");
        break;
    case 3:
        player.runScript("累積贊助獎勵");
        break;
    case 4:
        player.runScript("快捷轉職");

        break;
    case 5:
        player.runScript("萬能傳送");
        break;
    case 6:
        player.runScript("各式商店");
        break;
    case 7:
        player.runScript("通貨中心");
        break;
    case 8:

        player.runScript("cdk");
        break;
    case 9:
        player.runScript("BOSS挑戰");
        break;
    case 10:
        player.runScript("副本大廳");
        break;
    case 11:
        player.runScript("強者之路");
        break;
    case 12:
        //player.runScript("拍賣物品");
        player.runScript("特色");

        break;
    case 13:
        player.runScript("更多");
        break;
    case 14:
        player.runScript("戰力");
        break;
    case 15:
        player.runScript("签到");
        break;
    case 16:
        player.runScript("在線獎勵");
        break;
    case 17:
        player.runScript("等級獎勵");
        break;

    case 30:
        player.runScript("獎勵發送");
        break;
    case 31:
        txt = "\r\n\r\n";
        txt += "#L0#點卷獎勵#l #L1#EXP獎勵#l #L2#物品獎勵#l #L3#楓幣獎勵#l";
        let sel27 = npc.askMenu(txt);
        txt = "\r\n\r\n";
        if (sel27 == 0) {
            Number = 10000000;
            txt += "可以輸入的最大值=" + Number + "｜1千萬\r\n點卷";
        } else if (sel27 == 1) {
            Number = 99999999;
            txt += "可以輸入的最大值=" + Number + "\r\nEXP";
        } else if (sel27 == 2) {
            Number = 9999999;
            txt += "可以輸入的最大值=" + Number + "\r\n物品代碼";
        } else if (sel27 == 3) {
            Number = 103000000;
            txt += "可以輸入的最大值=" + Number + "\r\n楓幣";
        }
        let sel27Number = npc.askNumber(txt, 0, 0, Number);
        if (sel27 == 0) {
            npc.broadcastPlayerNotice(38, "管理員發送獎勵道具, 在線玩家請至左側小星星查看");
            npc.addCSPointReward(sel27Number, "", 1);
        } else if (sel27 == 1) {
            npc.broadcastPlayerNotice(38, "管理員發送獎勵EXP, 在線玩家請至左側小星星查看");
            npc.addExpReward(sel27Number, "", 1);
        } else if (sel27 == 2) {
            txt = "\r\n\r\n";
            Number2 = 10000;
            txt += "可以輸入的最大值=" + Number2 + "\r\n道具數量";
            let Number = npc.askNumber(txt, 0, 0, Number2);
            npc.broadcastWeatherEffectNotice(190, "管理員發送獎勵, 在線玩家請至左側小星星查看!!", 5000); //35[特效 1-???] 1000[1秒]
            npc.addItemReward(sel27Number, Number, "", 1);
        } else if (sel27 == 3) {
            npc.broadcastPlayerNotice(38, "管理員發送楓幣, 在線玩家請至左側小星星查看");
            npc.addMesosReward(sel27Number, "", 1);
        }
        break;
    case 32:
        player.runScript("個人獎勵發送物品");
        break;
    case 33:
        let selection0 = npc.askNumber("怪物代碼", 1, 1, 9999999);
        let selection1 = npc.askNumber("怪物數量", 1, 1, 9999999);
        GS = selection0;
        if (true) {
            let position = player.getPosition();
            for (var i = 1; i <= selection1; i++) {
                let mob = map.makeMob(GS);
                let bosshp = 1;
                mob.changeBaseHp(bosshp);
                map.spawnMob(mob, position.getX(), position.getY()); //自身站點
            }
        }
        break;
    case 34:
        player.runScript("強制结束副本");
        break;
    case 35:
        player.useSkillEffect(100001026, 1);
        break;
}
function online() {
    var i = -1;
    var sql = "SELECT Count(accounts.loggedin) FROM accounts WHERE accounts.loggedin > 0";
    var push = player.customSqlResult(sql);
    if (push.size() > 0) {
        var result = push.get(0);
        var name = result.get("Count(accounts.loggedin)");
    }
    return name;
}
function AutoRate() {
    date = new Date();
    let day = date.getDay();
    let hour = date.getHours();
    let minute = date.getMinutes();
    if (day == 6 && hour == 0 && minute <= 3) {
        if (npc.makeEvent("autorate", true, party) == null) {
        }
    } else if (day == 1 && hour == 0 && minute <= 0) {
        var event = npc.getEvent("autorate");
        event.destroyEvent();
        if (npc.makeEvent("autorate", true, party) == null) {
        }
    }
}
function AutoShop() {
    date = new Date();
    let day = date.getDay();
    let hour = date.getHours();
    let minute = date.getMinutes();
    if (minute < 1) {
        //delvalueS();
        if (npc.makeEvent("autoshop", true, party) == null) {
        }
    }
}
function AutoGain() {
    if (hour == 20 && minute <= 3) {
        if (npc.makeEvent("autogain", true, party) == null) {
        }
    }
}
function delvalueS() { //刪除全服限購
    var sql = "delete from dgms_worldshop where ID <= 31";
    player.customSqlUpdate(sql);
}
function setItem(id, item) { //更新總額度
    var sql = "update dgms_expvalue SET value = " + item + " where id = '" + id + "';"; //更新itemid
    player.customSqlUpdate(sql);
}
function wcrw() {
    var A = player.getAmountOfItem(1202161);
    var B = player.getAmountOfItem(1202162);
    var C = player.getAmountOfItem(1202163);
    var D = player.getAmountOfItem(1202164);
    if (A > 0 && B > 0 && C > 0 && D > 0) {
        player.completeQuest(55182, 0);
        npc.say("已經收藏好了4种精靈圖騰了呢!\r\n獲得\r\n#v1202160##z1202160#");
    }
}
function Sell() {
    let meso10 = player.getAmountOfItem(4001713) * 100000; //這是十萬金幣
    let meso100 = player.getAmountOfItem(4001714) * 1000000; //這是百萬金幣
    let meso500 = player.getAmountOfItem(4001785) * 5000000; //這是5百萬金幣
    let meso = meso10 + meso100 + meso500;
    //以下是清理背包所有金幣代碼
    player.loseItem(4001713);
    player.loseItem(4001714);
    player.loseItem(4001785);
    player.gainMesos(meso10 + meso100 + meso500);
    //下面不要動核心
    if (meso > 0 && meso < 1000000) {
        player.showSystemMessage("[楓幣自動販賣]: 本次獲得 " + meso / 100000 + " 十萬楓幣！");
    } else if (meso >= 1000000 && meso < 10000000) {
        player.showSystemMessage("[楓幣自動販賣]: 本次獲得 " + meso / 1000000 + " 百萬楓幣！");
    } else if (meso >= 10000000 && meso < 100000000) {
        player.showSystemMessage("[楓幣自動販賣]: 本次獲得 " + meso / 10000000 + " 千萬楓幣！");
    } else if (meso >= 100000000) {
        player.showSystemMessage("[楓幣自動販賣]: 本次獲得 " + meso / 100000000 + " 億楓幣！");
    }
}
function delvalueA() { //刷新抽獎
	var sql = "update dgms_luck_jackpot set isDel='0' where id > '0'";
    player.customSqlUpdate(sql);
	var sqlA = "delete from dgms_luck_jackpot_acc where id > 0";
    player.customSqlUpdate(sqlA);
}
