
var meso = 300000000;
var eff = "#fEffect/CharacterEff/1112905/0/1#"; //
var tz15 = "#fEffect/CharacterEff/1112949/0/0#";  //花樣音符
 
    	 var selStr = eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+""+eff+"\r\n#k";
         		 selStr+= "#r			    #L2#隨機扭椅子3億#l   \r\n#k";
         		 selStr+= "#g                #L1#扭椅子銷量排行榜#l\r\n#k";
        		 selStr+= "#r                #L99#查看能抽到的椅子#l\r\n\r\n#k";
         		 
         		 selStr+= "      	   	   隨機扭椅子累計銷售"+parseInt(getMesoLog("隨機抽椅子"))/103000000+"億\r\n\r\n";
         		 selStr+="#r#e新增V148椅子：#n#k\r\n#v3015937##v3015938##v3015939##v3015940##v3015941##v3015942##v3015943##v3015944##v3015915##v3015916##v3015980##v3015981##v3015982##v3015983##v3015984##v3015985##v3015986##v3015987##v3015988##v3015989##v3015990##v3015970##v3015971##v3015972##v3015973##v3015991##v3015995##v3015996##v3015997##v3015998##v3017044##v3017045##v3017046##v3017047##v3017048##v3017049##v3017050##v3017051##v3017052##v3017053##v3017054##v3017055##v3012033##v3018002##v3018012##v3018014#\r\n";
         		  
        var selection = npc.askMenu(selStr);
		 
    	if (player.canGainItem(3015937,1)) {
			switch (selection) {
				case 1: 
					var sql = " select SUM(a.meso)/103000000 ms,a.characterid,b.`name` from zz_meso_log a,characters b where a.consume='隨機抽椅子' and a.worldid ="+0+" and a.characterid=b.id GROUP BY a.characterid ORDER BY  ms desc LIMIT 20; ";
					var resultList = player.customSqlResult(sql); 
					var text = "\t\t\t\t#e★ 椅子排行 ★#k#n\r\n\r\n";
					text += "\t#e名次#n\t#e玩家昵稱#n\t\t\t#e貢獻(億金幣)#n\t\t #n\r\n";
					for (var i = 0; i < resultList.size(); i++) {
					 var result = resultList.get(i);
					if (result == null) {
					break;
					}
					if (i == 1) {
						text += "#r";
					} else if (i == 2) {
						text += "#g";
					} else if (i == 3) {
						text += "#r";
					}
					text += "\t " + (i+1) + "\t\t ";

					// 填充名字空格
					text += result.get("name");
					for (var j = 16 - result.get("name").getBytes().length; j > 0 ; j--) {
						text += " ";
					}
					text += "\t " + result.get("ms");

					//text += "\t\t\t " + result.get("reborns1")+"#k";

					text += "\r\n";
					}
					npc.say(text);	
				break;
				case 2:
					if (player.hasMesos(meso)) {
						var itemid = getDataId();
						player.gainItem(itemid, 1);
						player.gainMesos(-meso);
						gainMesosLog(meso,'隨機抽椅子');
						npc.say("你獲得了 #r#t" + itemid + "##k " + 1 + "個。");
					} else {
						npc.say("          #e#r椅子抽獎機器\r\n需要# "+meso+" 金幣.試下手氣哦!說不定抽到好椅子可以一夜暴富的呢!\r\n你好像沒有# "+meso+" 金幣!");
					}
				break;
				case 99:
					var selStr ="#v3010000##v3010001##v3010007##v3010008##v3010009##v3010018##v3010021##v3010025##v3010049##v3010055##v3010060##v3010061##v3010062##v3010063##v3010064##v3010065##v3010066##v3010067##v3010080##v3010081##v3010082##v3010083##v3010084##v3010086##v3010092##v3010097##v3010107##v3010108##v3010109##v3010110##v3010113##v3010114##v3010115##v3010129##v3010130##v3010131##v3010132##v3010133##v3010134##v3010154##v3010157##v3010186##v3010191##v3010194##v3010202##v3010203##v3010205##v3010206##v3010207##v3010208##v3010211##v3010215##v3010216##v3010224##v3010225##v3010257##v3010279##v3010288##v3010297##v3010298##v3010307##v3010314##v3010315##v3010316##v3010317##v3010318##v3010319##v3010320##v3010321##v3010322##v3010354##v3010360##v3010364##v3010365##v3010368##v3010369##v3010370##v3010371##v3010373##v3010374##v3010375##v3010376##v3010377##v3010383##v3010390##v3010397##v3010402##v3010403##v3010404##v3010405##v3010406##v3010421##v3010423##v3010429##v3010430##v3010431##v3010432##v3010433##v3010434##v3010435##v3010436##v3010437##v3010438##v3010439##v3010440##v3010441##v3010442##v3010443##v3010444##v3010445##v3010446##v3010447##v3010448##v3010449##v3010450##v3010451##v3010452##v3010455##v3010457##v3010458##v3010459##v3010464##v3010465##v3010493##v3010500##v3010501##v3010502##v3010503##v3010504##v3010505##v3010506##v3010516##v3010517##v3010518##v3010519##v3010520##v3010521##v3010522##v3010523##v3010524##v3010525##v3010526##v3010530##v3010531##v3010532##v3010533##v3010534##v3010535##v3010536##v3010537##v3010538##v3010539##v3010540##v3010541##v3010542##v3010543##v3010544##v3010545##v3010546##v3010547##v3010548##v3010549##v3010550##v3010551##v3010552##v3010553##v3010554##v3010555##v3010556##v3010557##v3010558##v3010559##v3010560##v3010561##v3010562##v3010563##v3010564##v3010565##v3010566##v3010567##v3010568##v3010569##v3010570##v3010571##v3010572##v3010573##v3010574##v3010575##v3010576##v3010577##v3010578##v3010579##v3010580##v3010581##v3010582##v3010584##v3010585##v3010587##v3010589##v3010590##v3010512##v3010513##v3010514##v3010515##v3010592##v3010593##v3010596##v3010597##v3010598##v3010600##v3010601##v3010611##v3010612##v3010613##v3010622##v3010623##v3010624##v3010636##v3010637##v3010638##v3010639##v3010640##v3010641##v3010642##v3010643##v3010644##v3010651##v3010652##v3010653##v3010654##v3010655##v3010656##v3010659##v3010662##v3010672##v3010673##v3010674##v3010675##v3010676##v3010677##v3010678##v3010679##v3010680##v3010681##v3010682##v3010683##v3010685##v3010690##v3010691##v3010692##v3010693##v3010694##v3010695##v3010697##v3010700##v3010702##v3010703##v3010704##v3010705##v3010708##v3010721##v3010722##v3012017##v3010719##v3010720##v3010723##v3010733##v3010734##v3010735##v3010742##v3010743##v3010744##v3010757##v3010760##v3010761##v3010766##v3010767##v3010783##v3010797##v3010798##v3010800##v3010801##v3010802##v3010803##v3010804##v3010810##v3010811##v3010812##v3010814##v3010815##v3010835##v3010836##v3010837##v3010838##v3010844##v3010851##v3010852##v3010854##v3010862##v3010863##v3010867##v3010868##v3010869##v3010870##v3010871##v3010872##v3010873##v3010874##v3010875##v3010878##v3010941##v3010942##v3010943##v3010946##v3010956##v3010957##v3010958##v3010959##v3010960##v3010961##v3010962##v3010964##v3010965##v3010976##v3010978##v3010979##v3010980##v3014000##v3014001##v3014002##v3014003##v3014004##v3014005##v3014006##v3014011##v3015000##v3015003##v3015004##v3015015##v3015016##v3015017##v3015018##v3015019##v3015020##v3015021##v3015022##v3015023##v3015024##v3015025##v3015026##v3015030##v3015031##v3015032##v3015033##v3015041##v3015042##v3015043##v3015044##v3015048##v3015049##v3015050##v3015061##v3015062##v3015063##v3015064##v3015075##v3015081##v3015082##v3015083##v3015089##v3015090##v3015091##v3015092##v3015107##v3015109##v3015111##v3015112##v3015114##v3015115##v3015116##v3015117##v3015118##v3015119##v3015120##v3015155##v3015156##v3015157##v3015159##v3015160##v3015161##v3015167##v3015168##v3015171##v3015172##v3015173##v3015174##v3015175##v3015210##v3015223##v3015234##v3015235##v3015238##v3015239##v3015240##v3015241##v3015243##v3015244##v3015245##v3015246##v3015247##v3015248##v3015236##v3015263##v3015264##v3015272##v3015276##v3015277##v3015278##v3015279##v3015295##v3015296##v3015297##v3015298##v3015299##v3015300##v3015301##v3015302##v3015303##v3015305##v3015306##v3015309##v3015310##v3015311##v3015312##v3015315##v3015325##v3015326##v3015327##v3015314##v3015330##v3015331##v3015332##v3015333##v3015339##v3015340##v3015341##v3015346##v3015350##v3015354##v3015367##v3015368##v3015369##v3015387##v3015388##v3015389##v3015390##v3015391##v3015392##v3015394##v3015404##v3015405##v3015408##v3015409##v3015410##v3015411##v3015412##v3015413##v3015414##v3015416##v3015420##v3015421##v3015422##v3015423##v3015429##v3015431##v3015432##v3015433##v3015434##v3015435##v3015437##v3015438##v3015440##v3015447##v3015448##v3015468##v3017000##v3017001##v3017002##v3017003##v3017004##v3017005##v3017006##v3017007##v3017008##v3017009##v3017010##v3017011##v3017012##v3017013##v3017014##v3017015##v3017016##v3017017##v3017018##v3017019##v3017020##v3017021##v3015472##v3015473##v3015474##v3015475##v3015476##v3015516##v3015517##v3015544##v3015545##v3015565##v3015566##v3015567##v3015568##v3015569##v3015570##v3015571##v3015572##v3017022##v3015481##v3015518##v3015520##v3015521##v3015522##v3015523##v3015547##v3010002##v3010003##v3010004##v3010005##v3010006##v3010010##v3010012##v3010013##v3010014##v3010016##v3010017##v3010019##v3010024##v3010026##v3010967##v3010028##v3010973##v3010853##v3010968##v3010029##v3010030##v3010031##v3010032##v3015144##v3010033##v3010034##v3010035##v3010036##v3010037##v3010038##v3010039##v3010040##v3010041##v3010043##v3010044##v3010045##v3010046##v3010047##v3010048##v3010050##v3010051##v3010052##v3015177##v3010053##v3010054##v3010057##v3010058##v3010059##v3010068##v3010069##v3010070##v3010071##v3010073##v3010075##v3010077##v3010078##v3010079##v3010085##v3010093##v3010094##v3010095##v3010096##v3010098##v3010099##v3010100##v3010106##v3010111##v3010112##v3010116##v3010117##v3010118##v3010119##v3010120##v3010123##v3010124##v3010125##v3010126##v3010127##v3010128##v3010135##v3010136##v3010137##v3010138##v3010139##v3010140##v3010141##v3010142##v3010144##v3010145##v3010146##v3010147##v3010149##v3010151##v3010152##v3010155##v3010156##v3010161##v3010162##v3010163##v3010164##v3010166##v3010167##v3010168##v3010169##v3010170##v3010171##v3010172##v3010173##v3010174##v3010175##v3010177##v3010179##v3010180##v3010181##v3010182##v3010183##v3010184##v3010185##v3010187##v3010188##v3010189##v3010193##v3010195##v3010196##v3010197##v3010199##v3010200##v3010201##v3010209##v3010210##v3010212##v3010217##v3010218##v3010219##v3010220##v3010221##v3010222##v3010223##v3010226##v3010280##v3010281##v3010282##v3010283##v3010286##v3010287##v3010289##v3010290##v3010291##v3010292##v3010293##v3010294##v3010295##v3010296##v3010299##v3010300##v3010301##v3010302##v3010303##v3010304##v3010305##v3010306##v3010308##v3010311##v3010313##v3010355##v3010356##v3010357##v3010361##v3010362##v3010400##v3010401##v3010407##v3010408##v3010409##v3010410##v3010411##v3010412##v3010414##v3010415##v3010416##v3010417##v3010428##v3010453##v3010454##v3010456##v3010460##v3010461##v3010462##v3010490##v3010492##v3010494##v3010495##v3010499##v3010507##v3010508##v3010509##v3010510##v3010511##v3010528##v3010583##v3010586##v3010591##v3010599##v3010603##v3010604##v3010605##v3010606##v3010608##v3010609##v3010620##v3010621##v3010631##v3010632##v3010633##v3010657##v3010658##v3010660##v3010661##v3010665##v3010670##v3010688##v3010698##v3010699##v3010715##v3010716##v3010717##v3010718##v3011000##v3012001##v3012002##v3012003##v3012006##v3012009##v3012010##v3012011##v3012016##v3013000##v3013001##v3013002##v3013007##v3010696##v3010730##v3010102##v3010103##v3010104##v3010736##v3010739##v3010740##v3010741##v3012018##v3010737##v3010738##v3010755##v3010758##v3010779##v3010780##v3010781##v3010782##v3010788##v3010789##v3010790##v3010791##v3010792##v3010793##v3010795##v3010799##v3010794##v3010714##v3010732##v3012019##v3010813##v3012020##v3010806##v3010820##v3010842##v3010843##v3010527##v3010594##v3010664##v3010689##v3010751##v3010752##v3010754##v3010876##v3010824##v3010825##v3010826##v3010827##v3010828##v3010829##v3010830##v3010831##v3010877##v3012024##v3012025##v3010879##v3010894##v3010895##v3010896##v3010897##v3010898##v3010899##v3010900##v3010901##v3010902##v3010903##v3010904##v3010905##v3010906##v3010907##v3010908##v3010909##v3010910##v3010911##v3010912##v3010913##v3010914##v3010915##v3010916##v3010917##v3010918##v3010919##v3010920##v3010921##v3010922##v3010923##v3010936##v3010747##v3010748##v3010750##v3010966##v3012026##v3010864##v3010865##v3010955##v3010977##v3010947##v3010948##v3014008##v3015002##v3015006##v3015007##v3010753##v3010937##v3010938##v3010939##v3010944##v3010935##v3010821##v3010822##v3010823##v3012021##v3012022##v3012023##v3015028##v3010491##v3015001##v3015010##v3015013##v3015008##v3015037##v3015012##v3015014##v3015011##v3013008##v3015009##v3015034##v3015051##v3015053##v3015057##v3015058##v3015059##v3015060##v3010850##v3010845##v3015045##v3015046##v3015047##v3010756##v3010848##v3010849##v3010999##v3010984##v3010983##v3015054##v3015055##v3015056##v3015084##v3015085##v3015086##v3015087##v3015088##v3015093##v3015080##v3012027##v3012007##v3012008##v3015096##v3015097##v3015098##v3015099##v3015027##v3015106##v3015076##v3015077##v3015078##v3014009##v3015130##v3015131##v3015132##v3015133##v3015134##v3015135##v3015136##v3015137##v3015138##v3015139##v3015140##v3015142##v3015143##v3015146##v3015147##v3015148##v3015149##v3015150##v3016000##v3015100##v3015158##v3015178##v3015181##v3015183##v3015193##v3015197##v3015211##v3015129##v3012028##v3015182##v3015262##v3015224##v3015225##v3015258##v3015259##v3015260##v3015273##v3015274##v3015195##v3015227##v3015304##v3012030##v3015313##v3015316##v3016100##v3015317##v3015257##v3010729##v3015265##v3015266##v3015267##v3015268##v3015269##v3015270##v3015271##v3016101##v3015328##v3015329##v3015524##v3015338##v3015344##v3014010##v3015029##v3015370##v3015371##v3015372##v3015349##v3013009##v3015036##v3015342##v3015343##v3015374##v3015375##v3015376##v3015377##v3015393##v3015396##v3015397##v3015398##v3015399##v3015385##v3015386##v3015395##v3015400##v3015378##v3015379##v3015403##v3015406##v3015407##v3015415##v3015419##v3015424##v3015425##v3015426##v3015427##v3015428##v3015401##v3015430##v3015286##v3015287##v3015288##v3015384##v3015383##v3014012##v3015380##v3015439##v3015443##v3015382##v3015451##v3015461##v3015462##v3015463##v3015482##v3015228##v3015229##v3015493##v3015494##v3015495##v3012031##v3015519##v3014013##v3015525##v3019999##v3015529##v3012032##v3015526##v3015582##v3015583##v3015579##v3015580##v3015581##v3015538##v3015541##v3015543##v3015542##v3015551##v3015552##v3015553##v3015563##v3015574##v3015584##v3015585##v3015619##v3015620##v3015621##v3015436##v3015597##v3015598##v3015599##v3015600##v3017023##v3017024##v3017025##v3015573##v3014014##v3014015##v3014016##v3014017##v3014018##v3015604##v3015605##v3015606##v3015607##v3015608##v3015609##v3015623##v3015627##v3015660##v3015661##v3015662##v3015655##v3015656##v3015657##v3015659##v3015629##v3015630##v3015631##v3015632##v3015628#";
					npc.say(selStr);
				break;
			}
	  }else{
		  npc.say("背包空間不足")
	  }



function getMesoLog(typed){
	var sql = " select SUM(meso) meso from `zz_meso_log` a where a.consume = '"+typed+"' and a.worldid ="+0+" ";
	var resultList = player.customSqlResult(sql);
	var meso=0;
	for (var i = 0; i < resultList.size(); i++) {
    var result = resultList.get(i);
    if (result == null) {
        break;
    }
		meso = result.get("meso");
	}
	if(null ==meso || meso ==""){
	   meso=0;
	}
		return meso;
}

function gainMesosLog(meso,typed){
	var sql = "insert into zz_meso_log(characterID, paytime, consume,meso,worldid) values("+player.getId()+",now(),'"+typed+"',"+meso+","+0+")";
	player.customSqlInsert(sql);
}


function getDataId(){
	var itemid = "";
	var name="";

	var sql = " select itemid,`name`  from wz_itemdata a where a.`itemid` like '301%' order by rand() limit 1 ";
	var resultList = player.customSqlResult(sql);
 
	for (var i = 0; i < resultList.size(); i++) {
    var result = resultList.get(i);
    if (result == null) {
        break;
    }
		itemid = result.get("itemid");
	}
	if(itemid == "3015564"|| itemid =="3010832"  || itemid == "3015520" ||itemid=="3015798"||itemid=="3012033"||itemid=="3015650"||itemid=="3015651"||itemid=="3015895"){
	   itemid='3015659';
	}
		return itemid;
}


function askNumber(str,def,min,max){
	if(player.getQuestRecordEx(9601)==1){
		player.askNumberE(str,def,min,max);
	}else{
		player.askNumber(str,def,min,max);
	}
}


function sendNext(selStr){
 	if(player.getQuestRecordEx(9601)==1){
		player.sendNextE(selStr);
	}else{
		player.sendNext(selStr);
	}
}

function asktext(selStr,min,max){
	if(player.getQuestRecordEx(9601)==1){
		player.askTextE(selStr,min,max);
	}else{
		player.askText(selStr,min,max);
	}
}

function ask(selStr){
	if(player.getQuestRecordEx(9601)==1){
		npc.askMenuA(selStr,true);
	}else{
		npc.askMenu(selStr,true);
	}
}


function sendOk(text){
		if(player.getQuestRecordEx(9601)==1){
  		npc.sayE(text);
		}else{
			npc.say(text);
		}
		
}

function askYesNo(text){
		if(player.getQuestRecordEx(9601)==1){
  		npc.askYesNoE(text);
		}else{
			npc.askYesNo(text);
		}
}