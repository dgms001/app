/*
 * NeroMS MapleStory server emulator written in Java
 * Copyright (C) 2017-2018  dgms
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * 
 * @author dgms
 */

player.setInGameCurNodeEventEnd(true);
player.setInGameDirectionMode(true, false, false, true);
player.soundEffect("Sound/PL_Sound.img/myHome/flyingPaper");
player.setLayerBlind(true, 150, 0, 0, 0, 300, 0);
npc.setDelay(1000);

player.setLayerOn(150, "0", 200, -500, 12, "Effect/DirectionWz2.img/effect/myHome/4", 4);
player.setLayerMove(600, "0", -200, 400);
npc.setDelay(600);
player.setLayerMove(450, "0", 150, 300);
npc.setDelay(300);
player.setLayerOff(600, "0");
npc.setDelay(300);

npc.sayNextENoEsc("#b啊，嚇死我了！這是什麼？", true);
player.setLayerOn(150, "1", 0, 100, 12, "Effect/DirectionWz2.img/effect/myHome/3", 7);
npc.setDelay(1000);
player.setLayerMove(1000, "1", 0, -200);
npc.setDelay(1500);
npc.sayNextENoEsc("#b……在賣射手村的蘑菇屋？", true);
player.setLayerMove(1000, "1", 0, -300);
npc.setDelay(2000);
npc.sayNextENoEsc("#b還只要50萬金幣？！", true);
npc.setDelay(300);
npc.setCameraReturnToUser(0, 0);
player.setLayerOff(1000, "1");

player.setLayerBlind(true, 0, 0, 0, 0, 1000, 0);
player.setInGameDirectionMode(false, true, false, false);

let sel = npc.askMenuANoEsc("#b這怎麼可能……我在楓之谷世界也能有自己的房屋了嗎？\r\n#L0#這是夢還是真的啊？必須搶在別人簽約前趕緊去！#l\r\n#L1#現在很忙，有空再來吧。#l\r\n#r※ [我的小屋]每個世界內的帳號只能進行1次教程任務，完成教程時，世界內的所有角色都能使用[我的小屋]。在進行劇情時無法變更角色，請慎重決定！\r\n#k※接受時將馬上前往任務地區。", true);
if (sel == 0) {
        player.updateQuestRecordEx(64590, "rMap", String(map.getId()));
        player.changeMap(871000010, 0);
} else {
        npc.sayNextENoEsc("#b現在很忙等有空再說吧！", true);
}

