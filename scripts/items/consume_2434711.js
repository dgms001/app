var a30 = "#fEffect/CharacterEff/1022223/6/0#" //跑马灯
var a31 = "#fEffect/CharacterEff/1022223/7/0#" //跑马灯
var a32 = "#fEffect/CharacterEff/1022223/8/0#" //跑马灯
var a38 = "#fItem/Pet/5000213.img/stand0/0#";//藍色惡魔

var itemList = [//大獎
1402114,
1003409,
1002728,
1003055,
1003570,
1004057,
1003359,
1012291,
1012532,
1012073,
1012070,
1042244,
1082219,
1062158,
1072345,
1052532,
1052472,
1082719,
1082453,
1102777,
1032055,
1072275,
1402037,
1402180,
1382037,
1332112,
1402214,
1332101,
1432182,
1422156,
1382226,
1452220,
1462208,
1472230,
1332242,
1342087,
1492194,
1482183,
1532112,
1032235,
1232019,
1332153,
1342042,
1382127,
1402114,
1452132,
1472245,
1472050,
1003413,
1003219,
1002934,
1002869,
1002799,
1002872,
1003769,
1003526,
1002787,
1002788,
1051404,
1051403,
1051401,
1052217,
1052444,
1052208,
1102134,
1102143,
1102145,
1102147,
1102198,
1102234,
1102173,
1102241,
1102100,
1102099,
1102046,
1102047,
1102348,
1102716,
1082264,
1082392,
1082393,
1082394,
1082533,
1012076,
1012077,
1012078,
1012079,
1012081,
1012158,
1012416,
1012417,
1012418,
1012419,
1012540,
1012541,
1012542,
1012543,
1022193,
1022153,
1003091,



];

var itemList2 = [//中獎
1402114,
1003409,
1002728,
1003055,
1003570,
1004057,
1003359,
1012291,
1012532,
1012073,
1012070,
1042244,
1082219,
1062158,
1072345,
1052532,
1052472,
1082719,
1082453,
1102777,
1032055,
1072275,
1402037,
1402180,
1382037,
1332112,
1402214,
1332101,
1432182,
1422156,
1382226,
1452220,
1462208,
1472230,
1332242,
1342087,
1492194,
1482183,
1532112,
1032235,
1232019,
1332153,
1342042,
1382127,
1402114,
1452132,
1472245,
1472050,
1003413,
1003219,
1002934,
1002869,
1002799,
1002872,
1003769,
1003526,
1002787,
1002788,
1051404,
1051403,
1051401,
1052217,
1052444,
1052208,
1102134,
1102143,
1102145,
1102147,
1102198,
1102234,
1102173,
1102241,
1102100,
1102099,
1102046,
1102047,
1102348,
1102716,
1082264,
1082392,
1082393,
1082394,
1082533,
1012076,
1012077,
1012078,
1012079,
1012081,
1012158,
1012416,
1012417,
1012418,
1012419,
1012540,
1012541,
1012542,
1012543,
1022193,
1022153,
1003091,
1332177,
1332030,
1332048,
1332054,
1292006,
1332063,
1040014,
1102041,
1102084,
1082149,
1072001,
1012011,
1012056,
1022047,
1022058,
1022060,
1022067,
1032003,
1032027,
1032077,
1032078,
1032079,
1032183,
1032017,
1332025,
1382016,
1472032,
1472054,
1002905,
1002906,
1003391,
1003571,
1003579,
1003610,
1003635,
1003693,
1003692,
1003999,
1003981,
1004013,
1004650,
1042227,
1042352,
1042353,
1042283,
1062143,
1072073,
1072074,
1072075,
1072077,
1072087,
1072099,
1072100,
1072223,
1072264,
1072455,
1072872,
1072991,
1073071,
1073414,
1073423,
1082232,
1082453,
1082533,
1082719,
1002106,
1002163,
1002289,
1012291,
1012341,
1012346,
1012574,
1012576,
1012577,
1012586,
1012587,
1022150,
1032013,
1032016,
1032017,
1032061,
1032129,
1032226,
1032227,

];
//消耗2434711
//椅子箱腳本
/*for (var i = 0; i <= Jackpotchance1; i++) {
	player.dropMessage(1,""+i+"");
		
  }*/

let mapA = map.getId();
if (mapA == 993001100) { //限制開啟地圖
	//player.showSystemMessage("在卡BUG頭蓋骨給你打出來 操!!");
} else {
	txt = "Welcome to the special trip              " + a38 + "\r\n";
   txt += "" + a30 + "" + a30 + "" + a31 + "" + a31 + "" + a32 + "" + a32 + "" + a30 + "" + a30 + "" + a31 + "" + a31 + "" + a32 + "" + a32 + "" + a30 + "" + a30 + "" + a31 + "" + a31 + "" + a32 + "" + a32 + "" + a30 + "" + a30 + "" + a31 + "" + a31 + "" + a32 + "" + a32 + "\r\n\r\n";

	txt += "\t  #L0##b抽取玩具#l";
	txt += "\t  #L1##r查看物品#l\r\n\r\n\r\n";
}
let selection = npc.askMenuS(txt);

switch (selection) {
	case 0:
		while (true) {
			if (player.hasItem(2434711, 1) < 1) {
				npc.say("#fs17##e#b玩家持有的#v" + 2434711 + "#不足");
			} else if (player.getFreeSlots(1) < 1 || player.getFreeSlots(2) < 1 || player.getFreeSlots(3) < 1 || player.getFreeSlots(4) < 1 || player.getFreeSlots(5) < 1) {
				npc.say("#fs17##e#b身上背包空間不足。");
			} else {
				var Jackpotchance = Math.floor(Math.random() * 10000);//獎池總機率
				var Jackpotchance1 = Math.floor(Math.random() * itemList.length);//大獎的,需+1	
				var Jackpotchance2 = Math.floor(Math.random() * itemList2.length);//中講的,需+1
				if (Jackpotchance < 10000) {
					player.gainItem(itemList[Jackpotchance1], 1);
					//player.dropMessage(1,""+Jackpotchance+"/"+Jackpotchance1+"");
					//player.dropMessage(1,""+itemList[1]+"");
					//npc.broadcastPlayerNotice(4, "恭喜玩家 " + player.getName() + " 從玩具箱獲得大獎");
				} else {
					player.gainItem(itemList2[Jackpotchance2], 1);
					//npc.broadcastPlayerNotice(4, "恭喜玩家 " + player.getName() + " 獲得玩具中獎");
				}
				player.loseItem(2434711, 1);
				txt1 = "\r\n";
				txt1 += "\t\t \t     #L0##b點擊抽獎#l\r\n";
				let selection1 = npc.askMenuS(txt1);
			}
		}
		break;


	case 1:
		txt = "";
		txt += "下方為玩具內容物\r\n";
		for (var i = 0; i <= itemList2.length; i++) {
			if (i % 7 == 0) {
				txt += "\r\n";
			}
			txt += " #v" + itemList2[i] + "##l"
		}
		let selection1 = npc.askMenuS(txt);
		break;
}
